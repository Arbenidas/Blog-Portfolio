<div class="admin-dashboard-container">
  <div class="dashboard-header">
    <div>
      <h1 class="dashboard-title">Control_Center</h1>
      <p class="dashboard-subtitle">Manage Works Database directly from the core.</p>
    </div>
    
    <a routerLink="/admin/editor" class="btn-create-new">
      <span class="material-symbols-outlined btn-create-new-icon">add</span> Create New
    </a>
  </div>

  <!-- STATS -->
  <div class="stats-grid">
    <div class="stat-card stat-card-total">
      <div class="stat-header">
        <span class="material-symbols-outlined stat-icon stat-icon-primary">folder_managed</span>
        <h2 class="stat-title">Total Works</h2>
      </div>
      <span class="stat-val" *ngIf="!loading">{{ worksCount }}</span>
      <span class="stat-val-loading" *ngIf="loading">--</span>
    </div>
    <div class="stat-card stat-card-logs">
      <div class="stat-header">
        <span class="material-symbols-outlined stat-icon stat-icon-orange">article</span>
        <h2 class="stat-title">Field Logs</h2>
      </div>
      <span class="stat-val" *ngIf="!loading">{{ logsCount }}</span>
      <span class="stat-val-loading" *ngIf="loading">--</span>
    </div>
    <div class="stat-card">
      <div class="stat-header">
        <span class="material-symbols-outlined stat-icon stat-icon-green">visibility</span>
        <h2 class="stat-title">System Status</h2>
      </div>
      <span class="stat-val-online">ONLINE</span>
    </div>
  </div>

  <!-- RECENT ENTRIES -->
  <div class="recent-entries-container">
    <div class="recent-entries-inner">
      <h2 class="recent-entries-title">
        <span class="material-symbols-outlined">history</span> Recent_Updates
      </h2>
      
      <!-- Loading state -->
      <div *ngIf="loading" class="skeleton-list">
        <div *ngFor="let _ of [1,2,3]" class="skeleton-row">
          <div class="skeleton-icon"></div>
          <div class="skeleton-content">
            <div class="skeleton-text-1"></div>
            <div class="skeleton-text-2"></div>
          </div>
        </div>
      </div>

      <!-- Empty state -->
      <div *ngIf="!loading && recentEntries.length === 0" class="empty-state-box">
        No entries found. Create your first document.
      </div>

      <div *ngIf="!loading" class="entries-list">
        <div *ngFor="let entry of recentEntries" class="entry-row">
          <div class="entry-info">
            <div class="entry-badge"
              [ngClass]="entry.category === 'work' ? 'entry-badge-work' : 'entry-badge-log'">
              {{ entry.category === 'work' ? 'WORK' : 'LOG' }}
            </div>
            <div class="entry-details">
              <h3 class="entry-title"
                [ngClass]="entry.category === 'work' ? 'entry-title-work' : 'entry-title-log'"
                [routerLink]="'/admin/editor/' + entry.slug">{{ entry.title }}</h3>
              <p class="entry-meta">Edited {{ timeAgo(entry.updatedAt) }}</p>
            </div>
          </div>
          <div class="entry-actions">
            <button class="btn-action btn-action-edit"
              [routerLink]="'/admin/editor/' + entry.slug">
              <span class="material-symbols-outlined btn-action-icon">edit</span>
            </button>
            <button (click)="deleteEntry(entry)" class="btn-action btn-action-delete">
              <span class="material-symbols-outlined btn-action-icon">delete</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- PENDING DRAFTS -->
    <div class="recent-entries-inner" style="margin-top: 2rem;">
      <h2 class="recent-entries-title" style="display: flex; align-items: center; gap: 0.5rem;">
        <span class="material-symbols-outlined">edit_document</span> PENDING_DRAFTS
      </h2>
      
      <div *ngIf="!loading && drafts.length === 0" class="empty-state-box">
        No pending drafts. Everything is published.
      </div>

      <div *ngIf="!loading && drafts.length > 0" class="entries-list">
        <div *ngFor="let draft of drafts" class="entry-row">
          <div class="entry-info">
            <div class="entry-badge entry-badge-draft">
              {{ draft.category }}
            </div>
            <div class="entry-details">
              <h3 class="entry-title entry-title-draft"
                [routerLink]="'/admin/editor/' + draft.slug">{{ draft.title || 'Untitled Document' }}</h3>
              <p class="entry-meta">Last edited {{ draft.updatedAt | date:'short' }}</p>
            </div>
          </div>
          <div class="entry-actions">
            <button class="btn-action btn-action-edit"
              [routerLink]="'/admin/editor/' + draft.slug">
              <span class="material-symbols-outlined btn-action-icon">edit</span>
            </button>
            <button (click)="deleteEntry(draft)" class="btn-action btn-action-delete">
              <span class="material-symbols-outlined btn-action-icon">delete</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  <!-- TAG MANAGER -->
  <div class="tech-stack-dictionary-container">
    <div class="dictionary-header">
      <h2 class="dictionary-title">
        <span class="material-symbols-outlined">label</span> Tech_Stack Dictionary
      </h2>
      <p class="dictionary-subtitle">Manage global tags used for Works Database filtering and assignments.</p>
    </div>
    
    <div class="dictionary-input-group">
      <input 
        [(ngModel)]="newTagInput" 
        (keyup.enter)="addTag()"
        [disabled]="savingTags"
        type="text" 
        placeholder="Add new tag (e.g. Next.js)" 
        class="dictionary-input" />
      <button (click)="addTag()" [disabled]="savingTags || !newTagInput.trim()" class="btn-add-tag">
        <span *ngIf="!savingTags" class="material-symbols-outlined">add</span>
        <span *ngIf="savingTags" class="material-symbols-outlined" style="animation: spin 1s linear infinite;">progress_activity</span>
      </button>
    </div>

    <!-- Loading tags -->
    <div *ngIf="loading" class="dictionary-tags-grid">
      <div *ngFor="let _ of [1,2,3,4]" class="skeleton-tag"></div>
    </div>

    <!-- Empty tags -->
    <div *ngIf="!loading && systemTags.length === 0" class="empty-state-box" style="margin-top: 1rem;">
      No tags defined. Add one above.
    </div>

    <!-- Tag List -->
    <div *ngIf="!loading && systemTags.length > 0" class="dictionary-tags-grid">
      <div *ngFor="let tag of systemTags" class="tag-pill">
        <span class="tag-pill-text">{{ tag }}</span>
        <button (click)="removeTag(tag)" [disabled]="savingTags" class="btn-remove-tag">
          <span class="material-symbols-outlined text-[14px]">close</span>
        </button>
      </div>
    </div>
  </div>

</div>
