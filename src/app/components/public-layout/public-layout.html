<div class="noise-overlay"></div>
<div class="public-layout-bg bg-blueprint"></div>

<nav class="public-navbar">
  <div class="public-nav-container">
    <a routerLink="/" class="public-brand">
      <div class="public-brand-logo">
        <img src="logo.png" alt="Arbe Logo" class="public-brand-img" />
      </div>
      <h2 class="public-brand-text">arbe_Workshop_Rev</h2>
    </a>

    <div class="public-nav-right">
      <div class="public-nav-links">
        <a routerLink="/" routerLinkActive="active-link" [routerLinkActiveOptions]="{exact: true}" class="public-nav-link">{{ 'NAV.HOME' | translate }}</a>
        <span class="public-nav-separator">/</span>
        <a routerLink="/works" routerLinkActive="active-link" class="public-nav-link">{{ 'NAV.WORKS' | translate }}</a>
        <span class="public-nav-separator">/</span>
        <a routerLink="/logs" routerLinkActive="active-link" class="public-nav-link">{{ 'NAV.LOGS' | translate }}</a>
        <span class="public-nav-separator">/</span>
        <a routerLink="/guides" routerLinkActive="active-link" class="public-nav-link">{{ 'NAV.GUIDES' | translate }}</a>
        <span class="public-nav-separator">/</span>
        <a routerLink="/contact" routerLinkActive="active-link" class="public-nav-link">{{ 'NAV.CONTACT' | translate }}</a>
      </div>

      <!-- Authentication Links -->
      <div class="public-auth-group">
        
        <!-- Logged Out State -->
        <ng-container *ngIf="!(currentUser | async)">
          <a routerLink="/login" class="nav-auth-link">LOGIN</a>
          <a routerLink="/register" class="nav-auth-link highlight">ENROLL</a>
        </ng-container>

        <!-- Logged In State -->
        <ng-container *ngIf="currentUser | async as user">
          <div class="user-menu">
            <a [routerLink]="['/u', user.user_metadata['username'] || 'me']" class="nav-auth-link highlight">
              <span class="material-symbols-outlined" style="font-size: 14px;">account_circle</span>
              PROFILE
            </a>
            <button (click)="logout()" class="nav-auth-btn">LOGOUT</button>
          </div>
        </ng-container>

      </div>

      <div class="public-status-group">
        <button class="lang-toggle-btn" (click)="languageService.toggleLanguage()">
          [{{ languageService.activeLang() | uppercase }}]
        </button>
        <div class="public-status">
          <span class="public-status-dot"></span>
          <span class="public-status-text">{{ 'NAV.STATUS' | translate }}</span>
        </div>
      </div>
    </div>
  </div>
</nav>

<div class="content-wrapper" [@routeAnimations]="animationState()">
  <router-outlet #outlet="outlet" (activate)="prepareRoute(outlet)"></router-outlet>
</div>

<app-site-footer></app-site-footer>
